window.addEventListener("DOMContentLoaded",homepageFunctions);function homepageFunctions(){var e,t;if(!document.body.classList.contains("homepage"))return;let i=document.createDocumentFragment(),a=document.getElementById("header"),n=document.createElement("div"),r=[...document.querySelectorAll(".gallery-wrapper img")],l=(document.querySelectorAll(".index-gallery .arrow").forEach(e=>{e.addEventListener("click",()=>{var t;return t=e,void(u.stop(),c=m(),t.classList.contains("previous-slide")?((h=c.prev().length>0?c.prev():$(".custom-gallery > .slide:last-child")).children().first().fadeTo(400,1,function(){c.children().first().fadeTo(400,0)}),c.attr("data-active",0),h.attr("data-active",1)):f(),u.start(4e3))})}),new MutationObserver(e=>{let t=e[0],i=t.target.querySelector("video");t.target.dataset.active>0?i.play():i.pause()}));document.querySelector(".gallery-wrapper").remove(),i.appendChild(n);let d=window.innerWidth,o=window.innerHeight,s,c,p,h,u=((/iP(hone|ad|od)/.test(navigator.userAgent)?new Promise(e=>{let t=performance.now(),i=0,a=setInterval(()=>{if(i<30){i++;return}clearInterval(a);e((performance.now()-t)/30/20>1.3)},20)}):new Promise(e=>{let t=performance.now(),i=0,a=()=>{if(i<30){i++,requestAnimationFrame(a);return}e(30/((performance.now()-t)/1e3))};requestAnimationFrame(()=>a())}).then(e=>e<31||(navigator.getBattery?navigator.getBattery().then(e=>!e.charging&&e.level<=.2):void 0))).then(e=>{var t;r.slice(0,10).map(t=>g(t,e)),n.classList.add("custom-gallery"),n.firstElementChild.dataset.active=1,document.querySelector(".index-gallery").appendChild(n),u.start(2e3),Defer((t=e,void(console.log("deferred images now loading"),r.slice(11).map(e=>g(e,t,!0)),n.appendChild(i))),0)}),{handle:0,start:function(e){this.stop(),this.handle=setTimeout(f,e)},stop:function(){this.handle&&(clearTimeout(this.handle),this.handle=0)}});function g(e,t,a){let r=document.createElement("div"),d=document.createElement("div"),o=document.createElement("p"),s=e.alt,c=!t&&!!e.dataset.src.split(".").slice(-2,-1)[0].endsWith("video")&&e.dataset.src.split("/").pop().replace(/.jpg|.png|.gif/gi,"");if(a?i.appendChild(r):n.appendChild(r),r.appendChild(d),r.appendChild(o),r.setAttribute("data-active",0),r.classList.add("slide"),o.textContent=s,c){let p=document.createElement("video");p.src="/s/"+c+".mp4",p.muted=!0,p.loop=!0,p.setAttribute("playsinline",!0),p.autoplay=!0,p.poster=e.dataset.src+"?format=1000w",p.pause(),p.style.objectPosition=y(e).split(",").map(e=>100*parseFloat(e)+"%").join(" "),d.appendChild(p),l.observe(r,{attributes:!0,attributeFilter:["data-active"]});return}{d.appendChild(e);let h=y(e).split(",").map(e=>100*parseFloat(e)+"%");e.style.objectPosition=h[0]+h[1];return}}function f(){(p=(c=m()).next().length>0?c.next():$(".custom-gallery > .slide:first-child")).children().first().fadeTo(400,1,function(){c.children().first().fadeTo(400,0)}),c.attr("data-active",0),p.attr("data-active",1),u.start(2e3)}function m(){return $(".custom-gallery").find('.slide[data-active="1"]')}function v(){setTimeout(function(){o=window.innerHeight,s=a.getBoundingClientRect().height,document.documentElement.style.setProperty("--window-height",o+"px"),document.documentElement.style.setProperty("--header-height",s+"px")},200)}function y(e,t){return setTimeout(function(){window.ImageLoader.load(e,{load:!t||t,mode:"fill"})},100),e.dataset.imageFocalPoint}v(),window.addEventListener("resize",(e=function(e){d!==window.innerWidth&&(console.log("resized"),v(),r.map(e=>y(e)),d=window.innerWidth)},function(i){t&&clearTimeout(t),t=setTimeout(e,500,i)}))}